{% extends "base.html" %}
{% load i18n %}
{% load materializecss %}

{% block content %}
<div class="container">
  <h3>
    {% if object %}
      {% trans "Update preferences" %}
    {% else %}
      {% trans "Register" %}
    {% endif %}
  </h3>
  <form method="post">
    {% csrf_token %}
    {{ form | materializecss }}
    <div class="row">
      <div class="col m6 s6 offset-s3 offset-m4">
        <div class="row">
            <input type="submit" value="{% trans 'Confirm' %}" class="waves-effect waves-light btn"/>
        </div>
      </div>
    </div>
  </form>
</div>
{% endblock content %}

{% block custom_scripts %}
<script type="text/javascript">
  $(document).ready(function() {
    $('select').material_select();
    $('textarea').addClass("materialize-textarea");

    $('#id_dinner_1').attr('disabled', true);
    $('#id_dinner_2').attr('disabled', true);
    $('#id_breakfast_2').attr('disabled', true);
    $('#id_dinner_3').attr('disabled', true);
    $('#id_breakfast_3').attr('disabled', true);

    $('#id_accomodation_day_1').change(function(event) {
      $('#id_dinner_1').attr('disabled', !event.currentTarget.checked);
      if(!event.currentTarget.checked) {
        $('#id_dinner_1').prop('checked', false);
      }
    });

    $('#id_accomodation_day_2').change(function(event) {
      $('#id_dinner_2').attr('disabled', !event.currentTarget.checked);
      $('#id_breakfast_2').attr('disabled', !event.currentTarget.checked);
      if(!event.currentTarget.checked) {
        $('#id_dinner_2').prop('checked', false);
        $('#id_breakfast_2').prop('checked', false);
      }
    });

    $('#id_accomodation_day_3').change(function(event) {
      $('#id_dinner_3').attr('disabled', !event.currentTarget.checked);
      $('#id_breakfast_3').attr('disabled', !event.currentTarget.checked);
      if(!event.currentTarget.checked) {
        $('#id_dinner_3').prop('checked', false);
        $('#id_breakfast_3').prop('checked', false);
      }
    });
  });
</script>
{% endblock custom_scripts %}
